import pandas as pd
import numpy as np

def normalize_crypto_data(df: pd.DataFrame) -> pd.DataFrame:
    """
    Normalize cryptocurrency data to a consistent format.
    Input df columns expected to contain varying naming conventions.
    Output columns standardized to:
        - 'timestamp' (datetime)
        - 'symbol' (str)
        - 'open' (float)
        - 'high' (float)
        - 'low' (float)
        - 'close' (float)
        - 'volume' (float)
    
    Handles common differences such as:
      - Different timestamp formats (unix, iso)
      - Different column names for OHLCV data
      - Volume in different units / currencies
    
    Args:
        df (pd.DataFrame): raw crypto data from any source
    
    Returns:
        pd.DataFrame: normalized crypto dataframe
    """
    # Standardize column names (example mapping, extend as needed)
    col_map = {
        'time': 'timestamp',
        'date': 'timestamp',
        'timestamp': 'timestamp',
        'symbol': 'symbol',
        'coin': 'symbol',
        'open': 'open',
        'open_price': 'open',
        'high': 'high',
        'high_price': 'high',
        'low': 'low',
        'low_price': 'low',
        'close': 'close',
        'close_price': 'close',
        'last_price': 'close',
        'volume': 'volume',
        'vol': 'volume',
        'volume_traded': 'volume',
        'trade_volume': 'volume',
    }
    
    # Rename columns that exist in df according to col_map
